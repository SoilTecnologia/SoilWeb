{
    "sourceFile": "backend/src/database/repositories/Scheduling/SchedulingRepository.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1651588425339,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1651588425339,
            "name": "Commit-0",
            "content": "import knex from '../..';\nimport { SchedulingModel } from '../../model/Scheduling';\nimport { ISchedulingRepository } from './ISchedulingRepository';\n\nclass SchedulingRepository implements ISchedulingRepository {\n  async findByPivotId(pivot_id: string): Promise<SchedulingModel[]> {\n    return await knex<SchedulingModel>('schedulings')\n      .select('*')\n      .where({ pivot_id })\n      .orderBy('timestamp', 'desc');\n  }\n\n  async findById(scheduling_id: string): Promise<SchedulingModel | undefined> {\n    return await knex<SchedulingModel>('schedulings')\n      .select()\n      .where({ scheduling_id })\n      .orderBy('timestamp', 'desc')\n      .first();\n  }\n\n  async getAllSchedulings(): Promise<SchedulingModel[]> {\n    return await knex<SchedulingModel>('schedulings').select();\n  }\n\n  async create(\n    scheduling: Omit<SchedulingModel, 'scheduling_id'>\n  ): Promise<SchedulingModel | undefined> {\n    const newScheduling = await knex<SchedulingModel>('schedulings')\n      .insert(scheduling)\n      .returning('*');\n\n    return newScheduling[0];\n  }\n\n  async delete(scheduling_id: string): Promise<SchedulingModel | undefined> {\n    return await knex<SchedulingModel>('schedulings')\n      .select()\n      .where({ scheduling_id })\n      .del();\n  }\n\n  async update(\n    scheduling: SchedulingModel\n  ): Promise<SchedulingModel | undefined> {\n    const results = await knex<SchedulingModel>('schedulings')\n      .where({ scheduling_id: scheduling.scheduling_id })\n      .update(scheduling)\n      .returning('*');\n\n    return results[0];\n  }\n}\n\nexport { SchedulingRepository };\n"
        }
    ]
}